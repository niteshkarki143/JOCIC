<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>Room G9 - Focus Security Services</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<style>
		/* Update Base Styles */
		body {
			font-family: 'Poppins', sans-serif;
			background: linear-gradient(135deg, #1e1b4b 0%, #4c1d95 50%, #312e81 100%);
			margin: 0;
			min-height: 100vh;
			overflow-x: hidden;
		}

		/* Update Launch Screen */
		.launch-screen {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(45deg, #1e1b4b 0%, #4c1d95 50%, #312e81 100%);
			z-index: 9999;
			display: flex;
			justify-content: center;
			align-items: center;
			transition: opacity 0.5s ease-out;
		}

		.launch-content {
			text-align: center;
			color: white;
			transform: scale(0.8);
			opacity: 0;
			animation: launchAppear 1s ease forwards;
		}

		@keyframes launchAppear {
			to {
				transform: scale(1);
				opacity: 1;
			}
		}

		.logo-container {
			width: 120px;
			height: 120px;
			margin: 0 auto 1.5rem;
			position: relative;
			animation: logoFloat 3s ease-in-out infinite;
			filter: drop-shadow(0 0 20px rgba(139, 92, 246, 0.5));
		}

		.logo-container img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			border-radius: 20px;
			border: 3px solid rgba(139, 92, 246, 0.3);
		}

		@keyframes logoFloat {
			0%, 100% { transform: translateY(0) rotate(0deg); }
			50% { transform: translateY(-20px) rotate(5deg); }
		}

		/* Update Card Styles */
		.main-container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
			opacity: 0;
			transform: translateY(20px);
			transition: all 0.5s ease-out;
		}

		.main-container.visible {
			opacity: 1;
			transform: translateY(0);
		}

		.card {
			background: rgba(30, 27, 75, 0.7);
			backdrop-filter: blur(12px);
			border: 1px solid rgba(139, 92, 246, 0.3);
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3),
						inset 0 0 20px rgba(139, 92, 246, 0.2);
			border-radius: 20px;
			padding: 1.5rem;
		}

		/* Update Table Styles */
		.modern-table {
			width: 100%;
			border-collapse: separate;
			border-spacing: 0;
			margin-top: 1rem;
			border: 1px solid rgba(139, 92, 246, 0.2);
			border-radius: 12px;
			overflow: hidden;
		}

		.modern-table th {
			background: rgba(139, 92, 246, 0.2);
			color: #f3f4f6;
			padding: 0.5rem 1rem;
			font-size: 0.8rem;
			border-bottom: 2px solid rgba(139, 92, 246, 0.3);
		}

		.modern-table td {
			padding: 0.5rem 1rem;
			color: #f3f4f6;
			font-size: 0.85rem;
			border-bottom: 1px solid rgba(139, 92, 246, 0.2);
		}

		.table-row {
			transition: all 0.3s ease;
			opacity: 0;
			transform: translateX(-20px);
		}

		.table-row.visible {
			opacity: 1;
			transform: translateX(0);
		}

		.table-row:hover {
			background: rgba(139, 92, 246, 0.15);
			transform: translateX(5px);
			box-shadow: -5px 0 15px rgba(139, 92, 246, 0.1);
		}

		/* Responsive Styles */
		@media (max-width: 768px) {
			.main-container {
				padding: 1rem;
			}

			.card {
				padding: 0.75rem;
			}

			.modern-table th,
			.modern-table td {
				padding: 0.4rem 0.5rem;
				font-size: 0.75rem;
			}

			.phone-link {
				padding: 0.2rem 0.5rem;
			}
		}

		/* Additional Animations */
		.fade-in {
			animation: fadeIn 0.5s ease forwards;
		}

		@keyframes fadeIn {
			from { opacity: 0; }
			to { opacity: 1; }
		}

		/* Update Phone Link Styles */
		.phone-link {
			color: #a78bfa;
			background: rgba(139, 92, 246, 0.1);
			border: 1px solid rgba(139, 92, 246, 0.2);
			display: inline-flex;
			align-items: center;
			transition: all 0.3s ease;
			padding: 0.25rem 0.75rem;
			border-radius: 20px;
		}

		.phone-link:hover {
			background: rgba(139, 92, 246, 0.2);
			transform: translateY(-2px);
			box-shadow: 0 5px 15px rgba(139, 92, 246, 0.2);
		}

		/* Add Glow Effects */
		.text-glow {
			text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
		}

		.border-glow {
			box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
		}

		/* Update Member Count Badge */
		.member-count {
			background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1));
			border: 1px solid rgba(139, 92, 246, 0.3);
			box-shadow: 0 0 10px rgba(139, 92, 246, 0.2);
		}

		/* Lifeguard Special Styling */
		.lifeguard-row {
			background: linear-gradient(90deg, rgba(16, 185, 129, 0.1), transparent) !important;
			border-left: 4px solid #10b981 !important;
		}

		.lifeguard-phone {
			color: #34d399 !important;
			background: rgba(16, 185, 129, 0.1) !important;
			border: 1px solid rgba(16, 185, 129, 0.3) !important;
		}

		.lifeguard-phone:hover {
			background: rgba(16, 185, 129, 0.2) !important;
			box-shadow: 0 5px 15px rgba(16, 185, 129, 0.2) !important;
		}

		/* Add these new header styles */
		.header-container {
			text-align: center;
			margin-bottom: 2rem;
			position: relative;
			padding: 1.5rem;
			border-radius: 15px;
			background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05));
			border: 1px solid rgba(139, 92, 246, 0.2);
			overflow: hidden;
		}

		.room-title {
			font-size: 3.5rem;
			font-weight: 800;
			background: linear-gradient(135deg, #fff 0%, #c4b5fd 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
			margin-bottom: 0.5rem;
			position: relative;
			z-index: 1;
		}

		.company-subtitle {
			font-size: 1.1rem;
			color: #c4b5fd;
			font-weight: 500;
			letter-spacing: 1.5px;
			position: relative;
			z-index: 1;
		}

		.location-text {
			color: #a78bfa;
			font-size: 0.9rem;
			font-weight: 400;
			margin-top: 0.5rem;
			opacity: 0.9;
		}

		.header-glow {
			position: absolute;
			width: 150px;
			height: 150px;
			background: radial-gradient(circle, rgba(139, 92, 246, 0.4) 0%, transparent 70%);
			border-radius: 50%;
			filter: blur(20px);
			animation: glowPulse 3s infinite;
		}

		.glow-1 { top: -50px; left: 20%; }
		.glow-2 { bottom: -50px; right: 20%; }

		@keyframes glowPulse {
			0%, 100% { transform: scale(1); opacity: 0.5; }
			50% { transform: scale(1.2); opacity: 0.8; }
		}

		/* Mobile responsiveness */
		@media (max-width: 768px) {
			.room-title {
				font-size: 2.5rem;
			}
			
			.company-subtitle {
				font-size: 1rem;
				letter-spacing: 1px;
			}
			
			.location-text {
				font-size: 0.8rem;
			}
			
			.header-container {
				padding: 1rem;
				margin-bottom: 1.5rem;
			}
		}
	</style>
</head>
<body>
	<!-- Launch Screen -->
	<div class="launch-screen" id="launchScreen">
		<div class="launch-content">
			<div class="logo-container">
				<img src="logo.jpg" alt="Focus Security Services">
			</div>
			<h1 class="text-4xl font-bold mb-2">ROOM G09</h1>
			<p class="text-purple-400">Focus Security Services</p>
		</div>
	</div>

	<!-- Main Content -->
	<div class="main-container" id="mainContent">
		<div class="card">
			<div class="header-container">
				<div class="header-glow glow-1"></div>
				<div class="header-glow glow-2"></div>
				
				<h1 class="room-title">ROOM G09</h1>
				<div class="company-subtitle">FOCUS SECURITY SERVICES</div>
				<div class="location-text">
					<i class="fas fa-map-marker-alt mr-2"></i>
					Abu Dhabi Accommodation
				</div>
			</div>

			<div class="flex justify-between items-center mb-4">
				<div class="flex items-center gap-3">
					<i class="fas fa-users text-violet-400 text-glow"></i>
					<h2 class="text-xl text-white text-glow">Room Members</h2>
				</div>
				<div class="member-count px-4 py-2 rounded-full">
					<span class="text-violet-300">Total: 09 members</span>
				</div>
			</div>

			<table class="modern-table">
				<thead>
					<tr>
						<th class="text-left">ID</th>
						<th>Name</th>
						<th class="text-right">Contact</th>
					</tr>
				</thead>
				<tbody id="membersList">
					<!-- Table rows will be populated by JavaScript -->
				</tbody>
			</table>
		</div>
	</div>

	<script>
		// Member data - read from localStorage or use default data
		const members = JSON.parse(localStorage.getItem('roomMembers')) || [
			{ id: "923", name: "NARENDRA KUMAR THAPA MAGAR", phone: "0557503725" },
			{ id: "1301", name: "RAVI PURI", phone: "0564930319" },
			{ id: "1415", name: "DHAN BAHADUR", phone: "0558384640" },
			{ id: "1418", name: "BHUVAN GIRI", phone: "0525581327" },
			{ id: "1438", name: "NITESH KARKI", phone: "0562203706" },
			{ id: "1518", name: "TEJ NARAYANAN", phone: "0525420496" },
			{ id: "1538", name: "BADAL PRADHAN", phone: "0557912817" },
			{ id: "1543", name: "ANISH GANESH", phone: "0558107977" },
			{ id: "-", name: "-", phone: "-" },
			{ 
				id: "LIFE GUARD", 
				name: "NITESH", 
				phone: "0586343958",
				isLifeGuard: true 
			}
		];

        // Site settings
        const defaultSettings = {
            roomTitle: "ROOM G09",
            companyName: "FOCUS SECURITY SERVICES",
            location: "Abu Dhabi Accommodation",
            logoUrl: "logo.jpg"
        };

        let siteSettings = JSON.parse(localStorage.getItem('siteSettings')) || defaultSettings;

        // Auto refresh data every 30 seconds
        function startAutoRefresh() {
            setInterval(() => {
                const storedMembers = JSON.parse(localStorage.getItem('roomMembers'));
                const storedSettings = JSON.parse(localStorage.getItem('siteSettings'));
                
                if (storedMembers) {
                    members = storedMembers;
                    const tbody = document.getElementById('membersList');
                    tbody.innerHTML = '';
                    populateAndAnimateTable();
                }
                
                if (storedSettings) {
                    siteSettings = storedSettings;
                    updateSiteContent();
                }
            }, 30000); // Check every 30 seconds
        }

        // Update site content with settings
        function updateSiteContent() {
            // Update launch screen
            document.querySelector('.launch-content h1').textContent = siteSettings.roomTitle;
            document.querySelector('.launch-content p').textContent = siteSettings.companyName;
            document.querySelector('.logo-container img').src = siteSettings.logoUrl;

            // Update main content
            document.querySelector('.room-title').textContent = siteSettings.roomTitle;
            document.querySelector('.company-subtitle').textContent = siteSettings.companyName;
            document.querySelector('.location-text').innerHTML = `
                <i class="fas fa-map-marker-alt mr-2"></i>
                ${siteSettings.location}
            `;

            // Update member count - now including lifeguard but excluding empty entries
            const totalMemberCount = members.filter(m => m.id !== '-').length;
            document.querySelector('.member-count span').textContent = `Total: ${String(totalMemberCount).padStart(2, '0')} members`;

            // Update title tag
            document.title = `${siteSettings.roomTitle} - ${siteSettings.companyName}`;
        }

		// Launch animation
		window.addEventListener('load', () => {
            updateSiteContent();
            startAutoRefresh(); // Start auto refresh when page loads
			setTimeout(() => {
				document.getElementById('launchScreen').style.opacity = '0';
				setTimeout(() => {
					document.getElementById('launchScreen').style.display = 'none';
					document.getElementById('mainContent').classList.add('visible');
					populateAndAnimateTable();
				}, 500);
			}, 2000);
		});

		// Listen for changes in localStorage (from admin panel)
		window.addEventListener('storage', (e) => {
			if (e.key === 'roomMembers') {
				const updatedMembers = JSON.parse(e.newValue);
				if (updatedMembers) {
					members.length = 0;
					members.push(...updatedMembers);
					const tbody = document.getElementById('membersList');
					tbody.innerHTML = '';
					populateAndAnimateTable();
				}
			} else if (e.key === 'siteSettings') {
                siteSettings = JSON.parse(e.newValue);
                updateSiteContent();
            }
		});

		// Listen for custom events from admin panel
		window.addEventListener('membersUpdated', (e) => {
			members.length = 0;
			members.push(...e.detail.members);
			const tbody = document.getElementById('membersList');
			tbody.innerHTML = '';
			populateAndAnimateTable();
		});

		window.addEventListener('settingsUpdated', (e) => {
			siteSettings = e.detail.settings;
			updateSiteContent();
		});

		// Populate and animate table
		function populateAndAnimateTable() {
			const tbody = document.getElementById('membersList');
			tbody.innerHTML = ''; // Clear existing content
			
			// Update member count - now including lifeguard but excluding empty entries
			const totalMemberCount = members.filter(m => m.id !== '-').length;
			document.querySelector('.member-count span').textContent = `Total: ${String(totalMemberCount).padStart(2, '0')} members`;

			members.forEach((member, index) => {
				const row = document.createElement('tr');
				row.className = 'table-row';
				
				// Add special styling for lifeguard
				if (member.isLifeGuard) {
					row.classList.add('lifeguard-row');
				}
				
				row.innerHTML = `
					<td class="font-medium">${member.id}</td>
					<td class="text-center">${member.name}</td>
					<td class="text-right">
						<a href="tel:${member.phone}" class="phone-link ${member.isLifeGuard ? 'lifeguard-phone' : ''}">
							<i class="fas fa-phone-alt mr-2"></i>
							${member.phone}
						</a>
					</td>
				`;
				tbody.appendChild(row);
				
				setTimeout(() => {
					row.classList.add('visible');
				}, index * 100);
			});
		}
	</script>
</body>
</html>
