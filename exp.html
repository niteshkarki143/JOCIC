<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>China-UAE Industrial Capacity Cooperation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            position: relative;
        }
        #watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 80px;
            color: #FFBF00;  /* Amber Yellow */
            white-space: nowrap;
            pointer-events: none;
            z-index: -1;  /* Ensure it's behind the content */
            transform: rotate(-45deg); /* Rotate watermark */
        }
        #pdf-content-wrapper {
            width: 100%;
        }
        .heading {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }
        .heading-zh {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }
        table {
            width: 100%;
            margin-bottom: 20px;
            border-collapse: collapse;
        }
        th, td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: left;
        }
        input, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 4px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-transform: uppercase;
        }
        textarea {
            height: 80px;
        }
        .save-btn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            display: block;
            margin: 0 auto;
        }
        .save-btn:hover {
            background-color: #45a049;
        }
        .add-row-btn, .delete-row-btn {
            background-color: #007bff;
            color: white;
            padding: 8px 12px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            display: inline-block;
        }
        .add-row-btn:hover, .delete-row-btn:hover {
            background-color: #0056b3;
        }
        .approval-table {
            width: 100%;
            border: 1px solid #ddd;
            margin-top: 20px;
            table-layout: fixed;
        }
        .approval-table td {
            width: 50%;
            padding: 10px;
            border: 1px solid #ddd;
            vertical-align: top;
        }
        .signature-area {
            border: 1px solid #ddd;
            height: 100px;
            text-align: center;
            vertical-align: middle;
        }
        .signature-area em {
            font-size: 16px;
            color: #888;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 14px;
            color: #333;
        }
        footer a {
            color: #007bff;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div id="watermark">JOCIC</div>

    <div id="pdf-content-wrapper">
        <!-- Main Heading -->
        <div class="heading">CHINA-UAE INDUSTRIAL CAPACITY COOPERATION DEVELOPMENT AND MANAGEMENT</div>

        <!-- Chinese Translation Heading -->
        <div class="heading-zh">中阿工业能力合作发展与管理</div>

        <form id="form-content">
            <table>
                <tr><th><label for="justification">JUSTIFICATION</label></th><td><textarea id="justification"></textarea></td></tr>
                <tr><th><label for="company">COMPANY</label></th><td><input type="text" id="company"></td></tr>
                <tr><th><label for="date">DATE OF APPLICATION</label></th><td><input type="text" id="date" placeholder="DD/MM/YYYY"></td></tr>
                <tr><th><label for="location">LOCATION</label></th><td><input type="text" id="location"></td></tr>
            </table>

            <h3>Equipment Details</h3>
            <table id="equipment-table">
                <tr><th>S.N</th><th>Equipment</th><th>Serial No</th><th>Quantity</th><th>Others</th><th>Action</th></tr>
                <tr><td>1</td><td><input type="text" id="equipment-1"></td><td><input type="text" id="serial-1"></td><td><input type="number" id="quantity-1" min="1"></td><td><input type="text" id="others-1"></td><td><button type="button" class="delete-row-btn">Delete</button></td></tr>
                <tr><td>2</td><td><input type="text" id="equipment-2"></td><td><input type="text" id="serial-2"></td><td><input type="number" id="quantity-2" min="1"></td><td><input type="text" id="others-2"></td><td><button type="button" class="delete-row-btn">Delete</button></td></tr>
                <tr><td>3</td><td><input type="text" id="equipment-3"></td><td><input type="text" id="serial-3"></td><td><input type="number" id="quantity-3" min="1"></td><td><input type="text" id="others-3"></td><td><button type="button" class="delete-row-btn">Delete</button></td></tr>
                <tr><td>4</td><td><input type="text" id="equipment-4"></td><td><input type="text" id="serial-4"></td><td><input type="number" id="quantity-4" min="1"></td><td><input type="text" id="others-4"></td><td><button type="button" class="delete-row-btn">Delete</button></td></tr>
                <tr><td>5</td><td><input type="text" id="equipment-5"></td><td><input type="text" id="serial-5"></td><td><input type="number" id="quantity-5" min="1"></td><td><input type="text" id="others-5"></td><td><button type="button" class="delete-row-btn">Delete</button></td></tr>
                <tr><td>6</td><td><input type="text" id="equipment-6"></td><td><input type="text" id="serial-6"></td><td><input type="number" id="quantity-6" min="1"></td><td><input type="text" id="others-6"></td><td><button type="button" class="delete-row-btn">Delete</button></td></tr>
            </table>
            <button type="button" class="add-row-btn" id="add-equipment-row">Add Equipment Row</button>

            <h3>Driver Details</h3>
            <table>
                <tr><th><label for="vehicle">VEHICLE NO</label></th><th><label for="driver-name">DRIVER NAME</label></th><th><label for="license">DRIVER LICENSE NO</label></th><th><label for="contact">DRIVER CONTACT NO</label></th></tr>
                <tr>
                    <td><input type="text" id="vehicle"></td>
                    <td><input type="text" id="driver-name"></td>
                    <td><input type="text" id="license"></td>
                    <td><input type="text" id="contact"></td>
                </tr>
            </table>

            <h3>COMPANY/OWNER MATERIALS ENTRY APPROVAL</h3>
            <table class="approval-table">
                <tr>
                    <td>
                        <label for="name">NAME</label><br>
                        <input type="text" id="name">
                    </td>
                    <td rowspan="3" class="signature-area">
                        <em>SIGNATURE/STAMP AREA</em>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="approval-date">DATE</label><br>
                        <input type="text" id="approval-date" placeholder="DD/MM/YYYY">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="remarks">REMARKS</label><br>
                        <textarea id="remarks"></textarea>
                    </td>
                </tr>
            </table>

            <h3>COMPANY/OWNER MATERIALS EXIT APPROVAL</h3>
            <table class="approval-table">
                <tr>
                    <td>
                        <label for="exit-name">NAME</label><br>
                        <input type="text" id="exit-name">
                    </td>
                    <td rowspan="3" class="signature-area">
                        <em>SIGNATURE/STAMP AREA</em>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="exit-date">DATE</label><br>
                        <input type="text" id="exit-date" placeholder="DD/MM/YYYY">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="exit-remarks">REMARKS</label><br>
                        <textarea id="exit-remarks"></textarea>
                    </td>
                </tr>
            </table>

            <!-- Missing Tables (Entry and Exit Security Approvals) -->
            <h3>EQUIPMENT/MATERIAL ENTRY SECURITY APPROVAL</h3>
            <table class="approval-table">
                <tr>
                    <td>
                        <label for="entry-name">NAME</label><br>
                        <input type="text" id="entry-name">
                    </td>
                    <td rowspan="3" class="signature-area">
                        <em>SIGNATURE/STAMP AREA</em>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="entry-date">DATE</label><br>
                        <input type="text" id="entry-date" placeholder="DD/MM/YYYY">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="entry-remarks">REMARKS</label><br>
                        <textarea id="entry-remarks"></textarea>
                    </td>
                </tr>
            </table>

            <h3>EQUIPMENT/MATERIAL EXIT SECURITY APPROVAL</h3>
            <table class="approval-table">
                <tr>
                    <td>
                        <label for="exit-security-name">NAME</label><br>
                        <input type="text" id="exit-security-name">
                    </td>
                    <td rowspan="3" class="signature-area">
                        <em>SIGNATURE/STAMP AREA</em>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="exit-security-date">DATE</label><br>
                        <input type="text" id="exit-security-date" placeholder="DD/MM/YYYY">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="exit-security-remarks">REMARKS</label><br>
                        <textarea id="exit-security-remarks"></textarea>
                    </td>
                </tr>
            </table>

        </form>
    </div>
    <button class="save-btn" type="button">Save as PDF</button>

    <footer>
        For any inquiries, please contact us at: <br>
        Email: <a href="mailto:info@jocic.cn">info@jocic.cn</a> <br>
        P.O Box 137335 JOCIC Park Headquarters, Plot KHIA7-C1, Taweelah, Abu Dhabi, UAE
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const equipmentTable = document.getElementById('equipment-table');
            
            // Add functionality to delete rows
            equipmentTable.addEventListener('click', (e) => {
                if (e.target && e.target.classList.contains('delete-row-btn')) {
                    const row = e.target.closest('tr');
                    row.remove();
                }
            });

            // Add new equipment row functionality
            const addRowButton = document.getElementById('add-equipment-row');
            addRowButton.addEventListener('click', () => {
                const table = document.getElementById('equipment-table');
                const rowCount = table.rows.length - 1; // Exclude the header row
                const newRow = table.insertRow(rowCount);
                newRow.innerHTML = `

                    <td>${rowCount + 1}</td>
                    <td><input type="text" id="equipment-${rowCount + 1}"></td>
                    <td><input type="text" id="serial-${rowCount + 1}"></td>
                    <td><input type="number" id="quantity-${rowCount + 1}" min="1"></td>
                    <td><input type="text" id="others-${rowCount + 1}"></td>
                    <td><button type="button" class="delete-row-btn">Delete</button></td>
                `;
            });

            // Save the content as PDF functionality
            const saveButton = document.querySelector('.save-btn');
            saveButton.addEventListener('click', async () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4');
                const contentWrapper = document.getElementById('pdf-content-wrapper');
                
                const canvas = await html2canvas(contentWrapper, { scale: 1.5 });
                const imgData = canvas.toDataURL('image/jpeg', 0.7); // Compress image to 70% quality (JPEG format)

                const width = 210;  // A4 width in mm
                const height = (canvas.height * width) / canvas.width; // Calculate corresponding height

                // Add watermark text "JOCIC" with amber yellow color
                doc.setTextColor(255, 191, 0);  // Amber Yellow color
                doc.setFontSize(40);
                doc.text("JOCIC", width / 4, height / 2, { angle: 45, align: "center" });

                // Add the main content image behind the watermark
                doc.addImage(imgData, 'JPEG', 0, 0, width, height);
                
                // Save the document as a PDF
                doc.save('industrial_capacity_cooperation_form.pdf');
            });
        });
    </script>
</body>
</html>
